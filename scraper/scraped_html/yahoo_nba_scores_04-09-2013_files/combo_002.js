
/* myteams-nav.js 1553444 */ YUI.add("media-myteams-nav",function(a){a.namespace("Media").MyTeamsNav=a.Base.create("MyTeamsNav",a.Base,[],{timers:{hide:500,hover:350},overlays:[],overlayConfig:{fantasyOverlay:{srcNode:".fantasy-teams",constrain:"#yog-bd",moreLink:".fantasy-teams-more",arrow:".fantasy-teams .arrow"},extraTeamsOverlay:{srcNode:".extra-teams",constrain:"#yog-bd",moreLink:".extra-teams-more",arrow:".extra-teams .arrow"}},initializer:function(){var d=this,e=false,f,c,b=this.overlayConfig;for(c in b){f=this.setupOverlay(c);e=f||e}if(e){d._initEventHandlers()}},showOverlay:function(b){var c=this.overlays[b];this.hideOverlays();if(c.get("destroyed")){this.setupOverlay(b);c=this.overlays[b]}if(c.get("visible")!==true){c.show();this._addBackgroundClickTarget()}},hideOverlays:function(){for(var b in this.overlays){if(this.overlays.hasOwnProperty(b)&&a.Lang.isObject(this.overlays[b])){this.overlays[b].hide()}}},resetTimers:function(){if(this.timer){this.timer.cancel();this.timer=null}},_handleOverlayShow:function(d,c){var b=this;b.resetTimers();if(d.type==="mouseover"){b.timer=a.later(b.timers.hover,b,function(){b.showOverlay(c)})}else{d.halt();b.showOverlay(c)}},_initEventHandlers:function(){var b=this,c=b.get("modId");if(!c){return}a.delegate(["click","mouseover"],function(d){b._handleOverlayShow(d,"fantasyOverlay")},c,"a.fantasy-teams-more",b);a.delegate(["click","mouseover"],function(d){b._handleOverlayShow(d,"extraTeamsOverlay")},c,"a.extra-teams-more",b);a.delegate("mouseout",function(d){if(d.relatedTarget&&!d.relatedTarget.ancestor(".flyout-teams",true)){b.resetTimers();b.timer=a.later(b.timers.hide,b,function(){this.hideOverlays()})}},c,".bd",this);a.delegate("mouseover",function(){if(b.timer){b.resetTimers()}},c,".bd .flyout-teams",this);a.Global.on("media-favorite-icon:remove",function(d){b.removeTeam(d)});a.Global.on("media-favorite-icon:add",function(d){b.addTeam(d)});a.Global.on("request-manager:cleanup",function(){for(var d in b.overlays){if(b.overlays.hasOwnProperty(d)&&a.Lang.isObject(b.overlays[d])){b.overlays[d].destroy()}}})},_addBackgroundClickTarget:function(){this.bodyEventListener=a.one("body").on("click",function(c){var b=c.target;if(a.one(b).ancestor("#yog-nav")){return}else{this.bodyEventListener.detach();this.hideOverlays()}},this)},removeTeam:function(f){var b=this,g=b.get("modId"),c=f.id,d;d=a.one(g+' [data-tid="'+c+'"]');if(d){d.remove()}},addTeam:function(k){var l=this,d=l.get("modId"),i=k.id,b=k.name,g=k.logo,c=k.logo,f,h,j=a.one(d+" .yom-myteams-nav ul");h='<li data-tid="'+i+'"><a href="'+c+'" data-action-outcome="navigate"><span><img class="logo" src="'+g+'"></span><em>'+b+"</em></a></li>";f=a.Node.create(h);if(j.hasClass("recommended")){j.removeClass("recommended");j.all("li").each(function(e){if(e.hasAttribute("data-tid")&&i!==e.getAttribute("data-tid")){e.remove()}})}if(!a.one(d+' [data-tid="'+i+'"]')){j.prepend(f)}},setupOverlay:function(c){var e=this.overlayConfig,h,d,b,g,i,f;if(!e[c]){return false}e=e[c];h=a.one(e.srcNode);if(!h){return false}d=new a.Overlay({srcNode:e.srcNode,zIndex:2,visible:false});d.constrain(e.constrain);d.render(h.ancestor("li"));d.set("align",{node:e.moreLink,points:[a.WidgetPositionAlign.TL,a.WidgetPositionAlign.TR]});b=a.one(e.moreLink).getY();g=d.get("y");i=d.get("height");f=b-g-(i/2);a.one(e.arrow).setStyle("top",f+"px");this.overlays[c]=d;return d}},{ATTRS:{modId:{value:null}}})},"3.0",{requires:["node-base","node-event-delegate","event-hover","overlay"]});