
/* loader.js 1240148 */ YUI.add("media-loader",function(a){var b=function(){b.superclass.constructor.apply(this,arguments)};b.ATTRS={node:{value:null},id:{value:null}};b.NAME="LOADER";a.namespace("Media").Loader=a.extend(b,a.Base,{initializer:function(c){this.set("node",a.one(c.node));if(!this.get("node")){a.log("no target node");return false}this.set("blanket",a.one(c.hasOwnProperty("blanket")?c.blanket:this.get("node")));return this},load:function(d,c){var e=this,f=this.get("id");if(f&&f.isInProgress()){f.abort()}c.on={success:function(i,h){var g=a.JSON.parse(h.responseText);if(g){e.get("node").insert(g.markup,"replace");e.fire("success",h)}else{a.log(h)}},complete:function(h,g){e.fire("complete",g);e.set("id",null)},failure:function(h,g){e.fire("failure",g)}};this.set("id",a.io(d,c));return this},destructor:function(){this.set("io",null);this.set("node",null);this.set("blanket",false)},toString:function(){return"Loader"}})},"3.3.1",{requires:["io","node","base","event","event-resize","json"]});
/* scoreboard-gs.js 1750007 */ YUI.add("media-scoreboard",function(a){function b(){b.superclass.constructor.apply(this,arguments)}b.ATTRS={loader:{value:null},league:{value:null},list:{value:1},node:{value:null},team:{value:null},bucket:{value:null},refresh:{value:null},frequency:{value:null},week:{value:null},date:{value:null},phase:{value:null},conf:{value:""},stream:{value:null},maxAge:{value:null},mygames:{value:[]},div:{value:null},season:{value:null},xhrPath:{value:null}};b.NAME="Scoreboard";a.namespace("Media.Sports").Scoreboard=a.extend(b,a.Base,{beacon:function(d){var c={data:{sec:d.hasOwnProperty("sec")?d.sec:(this.get("team")?"mod-tm-sch":"mod-sch"),pos:d.position,keys:{itc:d.hasOwnProperty("itc")?d.itc:0,tar:document.domain,slk:d.hasOwnProperty("slk")?d.slk:"game"}}};a.Global.fire("rapid-tracker:click",c)},initializer:function(d){this.set("node",a.one(d.node));if(!this.get("node")){return false}this.set("div",d.division);this.get("node").addClass("js");var e=this,c=null,f=e.get("node").one(".hd select");e.handle();if(d.refresh==="1"&&d.league){e.refresh();a.Global.on("request-manager:cleanup",function(){e.destroy()})}if(!f){return}c=new a.Media.Loader({node:e.get("node").one(".bd")});c.on("success",function(h){var g=JSON.parse(h.details[0].responseText);e.get("node").one(".bd").insert(JSON.parse(g).markup,"replace");e.handle()});c.on("failure",function(){});c.on("complete",function(){});e.set("loader",c);f.on("change",function(){var g=f.all("option").item(f.get("selectedIndex")),h=g.getAttribute("data-id");e.load(h);e.beacon({})});return this},bindUI:function(){a.log("binding scorething ui")},showDay:function(c,e){if(e){this.get("node").all(".days li").removeClass("selected")}var d=c.getAttribute("data-day"),f="#yom-sports-scorething-"+d;c.addClass("selected");this.get("node").all(".yom-sports-scorething-day").addClass("inactive");this.get("node").one(f).removeClass("inactive")},handle:function(){var f=this,c=this.get("node").one("table.list")?"tr":"tbody.game",d=this.get("node").all("table"),e=function(h){if(!h.target.ancestor("a",true)){var i=h.target.ancestor(f.get("node").one("table.list")?"tr":"tbody",true),g=i&&i.getAttribute("data-url")?i.getAttribute("data-url"):null;f.beacon({position:i.getAttribute("data-index")});h.halt();if(g){if((a.UA.os==="macintosh"&&h.metaKey)||(a.UA.os==="windows"&&h.ctrlKey)){window.open(g)}else{document.location=g}}}};d.each(function(g){g.delegate("click",e,c)});f.get("node").all(".days a").on("click",function(g){g.halt();f.showDay(g.target.ancestor("li",true),true)})},load:function(c){this.get("loader").load("/__xhr/sports/scorething-gs/",{data:"lid="+c+"&random="+Math.random()})},refresh:function(){if(!this.get("frequency")){return}var d={lid:this.get("league"),week:this.get("week"),date:this.get("date"),phase:this.get("phase"),conf:this.get("conf"),division:this.get("div"),season:this.get("season"),format:"realtime"},f=null,g=[],c=null,e=null;if(this.get("xhrPath")){e=this.get("xhrPath")+a.QueryString.stringify(d)}else{e="/__xhr/sports/scoreboard/gs/?"+a.QueryString.stringify(d)}f=new a.Sports.Scorestream({srcNode:this.get("node"),url:e,interval:this.get("frequency"),darlaEnabled:false,etagsEnabled:true,process:this.process,headers:{"Cache-Control":"max-age="+this.get("maxAge")}});if(this.get("league")==="mlb"){c=this.get("node").all("td.box .my");c.each(function(h){g.push(h.ancestor("td").getAttribute("data-gid"))})}else{c=this.get("node").all("tr.my");c.each(function(h){g.push(h.getAttribute("data-gid"))})}f.addAttr("mygames",{value:g});f.addAttr("league",{value:this.get("league")});f.addAttr("lastupdated",{value:null});f.fetch();f.flow();this.set("stream",f)},process:function(h){var d,j,o=this,k=this.get("mygames"),g=this.get("league"),i,n,m=this.get("srcNode"),f=h.games,e=h.settings,l,c;if(e.pollingEnabled===false){o.stop()}if(e.lastUpdated){if(e.lastUpdated>o.get("lastupdated")){o.set("lastupdated",e.lastUpdated)}else{return}}for(j in f){n=f[j];i=m.one('[data-gid="'+j+'"]');if(j&&n&&i){d=a.Node.create(n);if(a.Array.indexOf(k,j)!==-1){if(g==="mlb"){d.one(".game").addClass("my")}else{d.addClass("my")}}c=i.get("innerHTML");l=d.get("innerHTML");i.set("innerHTML",l)}}},destructor:function(){if(this.get("stream")){this.get("stream").stop();this.get("stream").destroy()}},toString:function(){return"Y.Media.Sports.Scoreboard"}})},"3.3.0",{requires:["media-loader","transition","get","widget","base","node","node-focusmanager","event","event-delegate","querystring-stringify-simple"]});